generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider  = "mysql"
    url       = env("DATABASE_URL")
}

enum Permissao {
    DEV
    ADM
}

model Usuario {
    id                     String                 @id @default(uuid())
    nome                   String
    email                  String                 @unique
    login                  String                 @unique
    permissao              Permissao              @default(ADM)
    avatar                 String?
    status                 Boolean                @default(true)
    criadoEm               DateTime               @default(now())
    atualizadoEm           DateTime               @default(now()) @updatedAt

    @@map("usuarios")
}

enum Status {
    EM_ANALISE
    DEFERIDO
    INDEFERIDO
}

enum TipoInscricao {
    MORADOR
    TRABALHADOR
}

enum Genero {
    MASCULINO
    FEMININO
    OUTRO
}

model Votante {
    id                     String                 @id @default(uuid())
    tipoInscricao          TipoInscricao          @default(MORADOR)
    empresa                String?
    nome                   String
    nomeSocial             String?
    telefone               String?
    genero                 Genero                 @default(OUTRO)
    email                  String                 @unique
    cpf                    String                 @unique
    dataNascimento         DateTime               @db.Date
    status                 Status                 @default(EM_ANALISE)
    criadoEm               DateTime               @default(now())
    atualizadoEm           DateTime               @default(now()) @updatedAt

    endereco               Endereco?
    arquivos               Arquivo[]

    @@map("votantes")
}

model Endereco {
    id                     String                 @id @default(uuid())
    logradouro             String
    numero                 String?
    complemento            String?
    bairro                 String
    cidade                 String
    estado                 String
    cep                    String
    latitude               Float?
    longitude              Float?
    votanteId              String                 @unique
    criadoEm               DateTime               @default(now())
    atualizadoEm           DateTime               @default(now()) @updatedAt

    votante                Votante                @relation(fields: [votanteId], references: [id])

    @@map("enderecos")
}

model Arquivo {
    id                     String                 @id @default(uuid())
    nome                   String
    tipo                   String
    tamanho                Int
    caminho                String
    votanteId              String
    criadoEm               DateTime               @default(now())
    atualizadoEm           DateTime               @default(now()) @updatedAt

    votante                Votante                @relation(fields: [votanteId], references: [id])

    @@map("arquivos")
}