/**
 * Utilitários para validação de coordenadas dentro de polígonos KML
 */

// Coordenadas dos polígonos extraídas do arquivo doc.kml
const POLYGON_COORDINATES: [number, number][][] = [
  // Polígono principal do perímetro OUCBT
  [
    [-46.62534923551672, -23.554273390130522], [-46.62490063111645, -23.551607228474655], 
    [-46.6235519620259, -23.551721213715567], [-46.623294888984866, -23.55174981461877], 
    [-46.61858601234892, -23.552349299936836], [-46.61825903759161, -23.5524212434708], 
    [-46.61793246836114, -23.552470335314847], [-46.61353355019253, -23.55288421137346], 
    [-46.613335512397754, -23.552894574166224], [-46.61318382913084, -23.55289867637549], 
    [-46.613032145844954, -23.55290277843721], [-46.61282849736061, -23.55289486713814], 
    [-46.61243331069229, -23.552835933590643], [-46.61215977101001, -23.552783865188616], 
    [-46.61194906912896, -23.552719676328852], [-46.6114163682229, -23.552557503584477], 
    [-46.61100783280042, -23.552415896120685], [-46.61072278003241, -23.552303169964247], 
    [-46.61041090356617, -23.55215152922003], [-46.60963502893797, -23.55172763942641], 
    [-46.608451024259445, -23.551081846695034], [-46.607484757702544, -23.550554800984326], 
    [-46.60736248605288, -23.55049637398815], [-46.60667869960567, -23.550144391882796], 
    [-46.604020450738545, -23.54868542946803], [-46.60353212083325, -23.54839995732782], 
    [-46.60291523411679, -23.548038056823838], [-46.60288741352209, -23.5480217276162], 
    [-46.60287159002632, -23.548041576984954], [-46.60112389834547, -23.550230941644923], 
    [-46.60091052096526, -23.550592097167826], [-46.60077925484518, -23.550745159326837], 
    [-46.60074098111639, -23.55083630891652], [-46.60059836340924, -23.551014592324496], 
    [-46.60041755548358, -23.55123435702556], [-46.60028227215839, -23.55141978901634], 
    [-46.6002215611541, -23.551526701698858], [-46.60015597875518, -23.55166816065286], 
    [-46.600061242692135, -23.55188550409553], [-46.599975439295655, -23.552112508421153], 
    [-46.599941811301214, -23.55228000730478], [-46.59990735596036, -23.552484358764435], 
    [-46.599897019403606, -23.55272286792142], [-46.599900546271385, -23.552900911300576], 
    [-46.59991401469233, -23.553042459838476], [-46.599943911868095, -23.553367788750876], 
    [-46.60014878974589, -23.55541052581746], [-46.60018275921474, -23.55559475770457], 
    [-46.600278255740555, -23.556588564203555], [-46.60030691596014, -23.5566983498329], 
    [-46.600358549933354, -23.55722483269561], [-46.60035381515505, -23.557286829996535], 
    [-46.60035026024176, -23.557333011947307], [-46.60041915513923, -23.5579824014344], 
    [-46.60043120246469, -23.558176340753686], [-46.60043297974544, -23.558339230903382], 
    [-46.60041347453504, -23.55856474021007], [-46.600386525214674, -23.55879032614163], 
    [-46.60032802077158, -23.559063465888922], [-46.60026302842038, -23.559278155400634], 
    [-46.60017675631771, -23.559499114290833], [-46.60008839325653, -23.559701130818848], 
    [-46.59995607235466, -23.559937734626722], [-46.5998172204442, -23.56014469552528], 
    [-46.59963913328276, -23.560379873678606], [-46.598281370097176, -23.562176169865992], 
    [-46.597648441480835, -23.563035597917366], [-46.597229973766595, -23.5635406343161], 
    [-46.59674149301627, -23.56410526716343], [-46.59606783892821, -23.564733477819775], 
    [-46.595374592264335, -23.565240608490985], [-46.59348952074269, -23.566302597018662], 
    [-46.591399858441385, -23.56737234797752], [-46.58949485287029, -23.568362522110355], 
    [-46.58916320577601, -23.56853135093838], [-46.58859587935546, -23.568849513289905], 
    [-46.58827325813862, -23.569141784287275], [-46.587960230606015, -23.569482450035675], 
    [-46.58771266952843, -23.569963682291938], [-46.58757017623897, -23.570399862745692], 
    [-46.587529262451795, -23.571071151114342], [-46.587609580511455, -23.572405930572618], 
    [-46.58764860847934, -23.572775508342627], [-46.5875672040424, -23.57377844617675], 
    [-46.58731278765896, -23.57583320891035], [-46.58703242923976, -23.57826507550855], 
    [-46.58671492161578, -23.5813644880798], [-46.58669076851466, -23.581539563659128], 
    [-46.58640874745066, -23.58367154536782], [-46.586421989102895, -23.583974290300525], 
    [-46.58618760021938, -23.584453399512388], [-46.58604573869408, -23.584381159817895], 
    [-46.585824859862456, -23.584305121163606], [-46.585610125609406, -23.584267489044947], 
    [-46.58541442476786, -23.58424826503047], [-46.58522321393337, -23.58426024019789], 
    [-46.585044762030485, -23.584290326391013], [-46.58489003960211, -23.58433010374036], 
    [-46.584620496267206, -23.584444288988923], [-46.584275901712964, -23.58461576968558], 
    [-46.58423373845125, -23.585543443372583], [-46.58425053663101, -23.585636827208063], 
    [-46.58436351124381, -23.585906316627266], [-46.5845926295344, -23.58642349949372], 
    [-46.58465073207325, -23.58723925656354], [-46.584609204202145, -23.587371163117872], 
    [-46.58447687443711, -23.587921472191667], [-46.58443641734568, -23.588077298389337], 
    [-46.58437980625148, -23.58820159259581], [-46.584270813760796, -23.588361820326117], 
    [-46.58407106320921, -23.588536248359155], [-46.5839256517398, -23.588658287412223], 
    [-46.583210294923404, -23.58926402691126], [-46.58280469599213, -23.589595152427034], 
    [-46.582115725136276, -23.590195922529002], [-46.58119802564658, -23.590974389519975], 
    [-46.58111981922731, -23.59100588917568], [-46.580970346992316, -23.591116588666782], 
    [-46.580523479912955, -23.591332810200203], [-46.58035308821646, -23.591431350341715], 
    [-46.58019063581518, -23.59153829812593], [-46.57992793814033, -23.591792016692086], 
    [-46.57977554272554, -23.591977877997728], [-46.579693337835664, -23.592092858794853], 
    [-46.579638685138455, -23.592209365393188], [-46.57955575381546, -23.5924191730038], 
    [-46.57947535594155, -23.59263599854306], [-46.579401967152656, -23.592881740434954], 
    [-46.57937255501862, -23.593003137592454], [-46.579343162708994, -23.593134377709163], 
    [-46.57930521912987, -23.59332070008733], [-46.579265988403066, -23.593497734206423], 
    [-46.579176421864766, -23.593693611958233], [-46.57877908909723, -23.594528993139946], 
    [-46.578433297942055, -23.59524193876374], [-46.578377546141105, -23.595365048363536], 
    [-46.57829972142535, -23.595486034384834], [-46.57819190380192, -23.595630894619287], 
    [-46.57808290885474, -23.595742895992426], [-46.57762423231692, -23.596169548655993], 
    [-46.577514229520396, -23.596303865062797], [-46.57726789248881, -23.59667318351267], 
    [-46.57709778464963, -23.596935529538285], [-46.577055674132176, -23.597044141788025], 
    [-46.57703455433204, -23.597179090303772], [-46.57702389978236, -23.597312397354848], 
    [-46.57704232835403, -23.597657082289604], [-46.57703160327029, -23.5977435221236], 
    [-46.577005153846244, -23.597817930580607], [-46.57696464489483, -23.597888418131966], 
    [-46.57690762693499, -23.597955009644117], [-46.576750951819555, -23.59811987089857], 
    [-46.57664099222576, -23.598233416336555], [-46.57650280180284, -23.598387162844112], 
    [-46.5762799671455, -23.59865735807898], [-46.57621188886598, -23.59876605314523], 
    [-46.57618087166003, -23.598884666657376], [-46.57616867218886, -23.598978977889594], 
    [-46.57616731410638, -23.5990785070195], [-46.57618451106443, -23.5991891358247], 
    [-46.57630277897027, -23.599450810985623], [-46.576394441843966, -23.599634552637443], 
    [-46.57647455364291, -23.59980287916845], [-46.576557999158034, -23.599938571948442], 
    [-46.57686986129861, -23.600328047895236], [-46.576944277433036, -23.600560818913642], 
    [-46.57726910499857, -23.600444729316404], [-46.57883819298735, -23.59962949848807], 
    [-46.57900485494304, -23.59953768004046], [-46.57894915938379, -23.599771953754384], 
    [-46.57887645492435, -23.60009155729062], [-46.57882542686321, -23.600290113335895], 
    [-46.578805192025804, -23.600457923718146], [-46.5787998538112, -23.60063407121101], 
    [-46.57881520759232, -23.60082788851716], [-46.57887811406464, -23.601015713678496], 
    [-46.57900019042216, -23.601267504535006], [-46.579175538428736, -23.60153256996], 
    [-46.57931285069573, -23.60173092606676], [-46.57938847117098, -23.601859291771337], 
    [-46.57944609794921, -23.602031638015347], [-46.57948794645815, -23.602220218896683], 
    [-46.57945690911626, -23.602729579266978], [-46.57937135944466, -23.603187569302552], 
    [-46.5793160876957, -23.60348180073788], [-46.57929509859786, -23.603652057000044], 
    [-46.57929676373779, -23.60389739646442], [-46.5793067197426, -23.604376719945733], 
    [-46.57939331386026, -23.605216389963555], [-46.579456047347264, -23.60556125532053], 
    [-46.579640083018134, -23.6062644773242], [-46.5796529768273, -23.606350947767982], 
    [-46.579642311067836, -23.606434045793275], [-46.57961406600409, -23.606587579312922], 
    [-46.579716955555185, -23.606807777351687], [-46.579780492781595, -23.60712960671485], 
    [-46.58012037357738, -23.608962932454112], [-46.58060974585071, -23.611812009321927], 
    [-46.58081244409841, -23.611806603617953], [-46.58095294758321, -23.611771489051968], 
    [-46.58286154589536, -23.611040440240814], [-46.582998920268686, -23.61099786055911], 
    [-46.583178187404584, -23.610959188028676], [-46.58803520579106, -23.61007714736739], 
    [-46.588394906265016, -23.61001576252873], [-46.58872620544659, -23.60994780449608], 
    [-46.58889133394335, -23.60990719322418], [-46.58912078190446, -23.60982862779266], 
    [-46.58926526974605, -23.609766735155834], [-46.58942229533954, -23.609688098101334], 
    [-46.58966234667188, -23.60955433800345], [-46.590126003971235, -23.60919099231243], 
    [-46.59024150113261, -23.609163079118293], [-46.592467554412636, -23.607453653720487], 
    [-46.5929521744681, -23.607074643152544], [-46.59332589140628, -23.606852272567053], 
    [-46.59355404718646, -23.606626970640164], [-46.593802951578205, -23.606326593604244], 
    [-46.594027340539476, -23.606122189871382], [-46.59494610631267, -23.60538969100237], 
    [-46.59555712846642, -23.60488141380021], [-46.596048594145415, -23.60447848371763], 
    [-46.59686996105133, -23.603853624228055], [-46.59721283596984, -23.60346486163127], 
    [-46.59793100772202, -23.602419882567492], [-46.5983485680176, -23.601774247926638], 
    [-46.59843114356317, -23.601674605619927], [-46.598491233360036, -23.601603550124022], 
    [-46.5985816925318, -23.601515656346663], [-46.598685454964375, -23.601425819461745], 
    [-46.5987945415783, -23.60134676411693], [-46.59893574079175, -23.60125726397748], 
    [-46.59942757670908, -23.601856148211134], [-46.599700916724885, -23.602069338099994], 
    [-46.5999820607193, -23.60230375867532], [-46.600120529719646, -23.60239299632708], 
    [-46.600214126613494, -23.60245063861181], [-46.60050059889228, -23.602615288907447], 
    [-46.60065973744509, -23.60269582442015], [-46.60095831914733, -23.602848880415642], 
    [-46.60107265358762, -23.602903418580212], [-46.60116979834433, -23.602938447781924], 
    [-46.601281295188834, -23.602961047608346], [-46.601347457585824, -23.60296244214064], 
    [-46.60141207458983, -23.602957621643988], [-46.60148876445109, -23.602946355333696], 
    [-46.601567522127496, -23.602927843373486], [-46.60172635169716, -23.602869945668388], 
    [-46.60268525956102, -23.60222873771476], [-46.602961049117816, -23.602062621728056], 
    [-46.603268011081276, -23.6017926955954], [-46.60365736576526, -23.601424661037303], 
    [-46.603926918831625, -23.601108613832086], [-46.60396966842233, -23.60103818700742], 
    [-46.6048805288274, -23.601805202835394], [-46.60498308056463, -23.60181750759373], 
    [-46.60504377962917, -23.60182094372776], [-46.60509113458462, -23.60183101964472], 
    [-46.605118505735255, -23.60185773737874], [-46.605112906806745, -23.601904933643972], 
    [-46.60510414598461, -23.60195803232071], [-46.60512834098501, -23.60198947866608], 
    [-46.60519905721062, -23.60193032121236], [-46.605268833149466, -23.60187442437371], 
    [-46.60534594257144, -23.601857462744398], [-46.60655527959388, -23.601963160154103], 
    [-46.60660820948086, -23.60199647617686], [-46.60792959655133, -23.60302968245768], 
    [-46.60804954189084, -23.60311820157483], [-46.60799283888537, -23.60369952945291], 
    [-46.60795653090466, -23.60372753833833], [-46.60756275443353, -23.603949428090225], 
    [-46.60789937287634, -23.6046090390369], [-46.60798877874696, -23.604636016685593], 
    [-46.60891039769348, -23.6040805842814], [-46.608733423500986, -23.60377565812654], 
    [-46.608737370824144, -23.603721706164293], [-46.608817276166064, -23.603620641460864], 
    [-46.60906324752116, -23.603372376986407], [-46.60915461758623, -23.60329539457189], 
    [-46.60922161512535, -23.603180556770525], [-46.609251746025855, -23.603112155772795], 
    [-46.60926643992531, -23.603039489930946], [-46.60935788603728, -23.602069678169627], 
    [-46.60948456233883, -23.600670650778547], [-46.60962856960284, -23.599158293465695], 
    [-46.60974126662269, -23.597970991205145], [-46.60986218810429, -23.596654830983233], 
    [-46.60997077277612, -23.59553222820824], [-46.61010494452507, -23.59409772317137], 
    [-46.61019384786756, -23.593096872447052], [-46.61025046589682, -23.592453325534557], 
    [-46.610383520299784, -23.59112827926768], [-46.61052279438302, -23.58972695225343], 
    [-46.61064058037489, -23.588523973469368], [-46.6107465062885, -23.58738496201091], 
    [-46.610826652552, -23.586518030991733], [-46.61099555993039, -23.58473558642414], 
    [-46.61100762819493, -23.584592510959748], [-46.611055438775026, -23.583837891271905], 
    [-46.61106777814013, -23.583717027624292], [-46.61108442269437, -23.582873421003455], 
    [-46.611056319007275, -23.582641993856594], [-46.61100237617095, -23.582436842046082], 
    [-46.61092810041549, -23.582275607919158], [-46.610734286371425, -23.58195333792288], 
    [-46.61066143477392, -23.58181240714356], [-46.61060908662106, -23.58167361164199], 
    [-46.61056741641295, -23.581510594391506], [-46.610538896599145, -23.581341300157437], 
    [-46.61052475449562, -23.581169960488257], [-46.61052009114018, -23.581028683907476], 
    [-46.61053484013451, -23.580888470329747], [-46.6105490507272, -23.580824568762395], 
    [-46.610598032566635, -23.580639390374905], [-46.6108108155894, -23.580091751352548], 
    [-46.61111348896803, -23.57936347604097], [-46.61115575874998, -23.5792545832344], 
    [-46.611212974486754, -23.579117992863345], [-46.61128246657782, -23.57893567190665], 
    [-46.61132353146641, -23.57880033264127], [-46.61136264282864, -23.578681539161774], 
    [-46.61137143500594, -23.578607218524766], [-46.6113349451281, -23.57851539713035], 
    [-46.611251231830344, -23.578415576938927], [-46.61115234735412, -23.578292886633275], 
    [-46.611068842387475, -23.57819405750639], [-46.61096066960696, -23.578080945239268], 
    [-46.61084489454634, -23.57797107232835], [-46.61069383566351, -23.577852083238312], 
    [-46.610515161732344, -23.577734192968165], [-46.61030207607843, -23.57762243855479], 
    [-46.61038042854383, -23.577467658992354], [-46.61046278243439, -23.57726344190105], 
    [-46.61055394013552, -23.5770259921279], [-46.610758379355296, -23.57599567710867], 
    [-46.61081809149694, -23.575389302105478], [-46.611020069023496, -23.57324231881989], 
    [-46.61114523715432, -23.57193857317052], [-46.61121401022425, -23.57121588327434], 
    [-46.61124117629653, -23.570889063971766], [-46.611458723339126, -23.56861377739918], 
    [-46.61148382689622, -23.568342786997928], [-46.61150249239903, -23.568274775476105], 
    [-46.61159572315493, -23.568111442935102], [-46.61163956975076, -23.56805978614341], 
    [-46.611719325960586, -23.56800450602983], [-46.61190029528209, -23.567934269455588], 
    [-46.61211462004971, -23.56789195171344], [-46.61300082269795, -23.567715063292805], 
    [-46.613566140994806, -23.567598934652818], [-46.6140174335627, -23.567499520367136], 
    [-46.61579922765799, -23.56711356195773], [-46.615905450311374, -23.56709177813301], 
    [-46.61599858359758, -23.5670731103461], [-46.61606916287503, -23.567068674052237], 
    [-46.61615286832261, -23.56707213824351], [-46.61640646597006, -23.5670931605455], 
    [-46.61702961555373, -23.567156121888775], [-46.61715549972217, -23.567163932783576], 
    [-46.61728699527618, -23.567141975363644], [-46.61738742638882, -23.567103273759045], 
    [-46.617499490218194, -23.567054517656228], [-46.6176055705761, -23.566997154623404], 
    [-46.618080250788665, -23.56665619467883], [-46.618175545919925, -23.566566163429204], 
    [-46.618763076206655, -23.56590525566463], [-46.619343002436786, -23.565231872940366], 
    [-46.619629906333245, -23.564885550262], [-46.6198614413453, -23.56456174785116], 
    [-46.62031259313756, -23.563941086440632], [-46.620568311937724, -23.56360050548319], 
    [-46.62101579057271, -23.56298439571489], [-46.62136811747518, -23.562525772971306], 
    [-46.62154147208715, -23.562355007190558], [-46.62204401957038, -23.562067837132815], 
    [-46.6225886349181, -23.561887958281893], [-46.622688006973426, -23.56185919789002], 
    [-46.62277657136598, -23.561851771535466], [-46.622860647488096, -23.56185378353011], 
    [-46.62309510119862, -23.561864249085705], [-46.623797715448084, -23.56189863142806], 
    [-46.62410630780004, -23.56191554525555], [-46.624348805663665, -23.561926918200708], 
    [-46.62442124406162, -23.561914602433752], [-46.62452920499465, -23.561891259626304], 
    [-46.62472582848975, -23.561844594887603], [-46.62543647884957, -23.56168021872836], 
    [-46.62629185430156, -23.561471160459583], [-46.62637585476038, -23.561451137371957], 
    [-46.62644539753786, -23.561442372799263], [-46.626505722868494, -23.56144878527152], 
    [-46.6267382976808, -23.561489697177457], [-46.62758749511846, -23.56166999346873], 
    [-46.628042086668984, -23.56169783261336], [-46.62839247608629, -23.56171213289636], 
    [-46.6285820075287, -23.56171014738084], [-46.62869516535184, -23.561687289090138], 
    [-46.62881371027491, -23.561648480924298], [-46.62892384035474, -23.56159458992462], 
    [-46.629005508405726, -23.561544338327383], [-46.6291046768211, -23.561467444479113], 
    [-46.629182417484806, -23.56135293814013], [-46.62923008443248, -23.561238476049013], 
    [-46.629272893861625, -23.56111142242096], [-46.629300928690185, -23.561001681225406], 
    [-46.62939866301998, -23.560157316107908], [-46.62941779453386, -23.56007232096029], 
    [-46.629449659290444, -23.559995139021353], [-46.6294886163397, -23.559921133649436], 
    [-46.62956034119002, -23.559835225995734], [-46.62973800718072, -23.559729244082657], 
    [-46.62965075740482, -23.559509548220113], [-46.62896782709724, -23.558075377196097], 
    [-46.628577962060504, -23.557241899760907], [-46.62820314441988, -23.556452602330506], 
    [-46.62814703229694, -23.55635069581998], [-46.627912155088595, -23.556233503514374], 
    [-46.627736075287494, -23.5561181334699], [-46.62760236588013, -23.55599906875497], 
    [-46.62749577756397, -23.555863013927755], [-46.627486830727754, -23.555796734712917], 
    [-46.627518958312905, -23.555732915252044], [-46.627797001358815, -23.555529441109876], 
    [-46.62780923335876, -23.555520463333085], [-46.62772222832105, -23.555415538835305], 
    [-46.627643523461586, -23.55526871700168], [-46.627275252581114, -23.554620311470405], 
    [-46.626697935134025, -23.554480183285676], [-46.62595374179699, -23.55435214433125], 
    [-46.62562398768151, -23.554312513997164], [-46.62534923551672, -23.554273390130522]
  ]
];

/**
 * Verifica se um ponto está dentro de um polígono usando o algoritmo Ray Casting
 * @param point - Coordenadas do ponto [longitude, latitude]
 * @param polygon - Array de coordenadas do polígono [[lng, lat], ...]
 * @returns true se o ponto estiver dentro do polígono
 */
function isPointInPolygon(point: [number, number], polygon: [number, number][]): boolean {
  const [x, y] = point;
  let inside = false;

  for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {
    const [xi, yi] = polygon[i];
    const [xj, yj] = polygon[j];

    if (((yi > y) !== (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi)) {
      inside = !inside;
    }
  }

  return inside;
}

/**
 * Verifica se as coordenadas fornecidas estão dentro do perímetro OUCBT
 * @param latitude - Latitude do ponto
 * @param longitude - Longitude do ponto
 * @returns true se o ponto estiver dentro do perímetro
 */
export function isWithinOUCBTPerimeter(latitude: number, longitude: number): boolean {
  const point: [number, number] = [longitude, latitude];
  
  // Verifica se o ponto está dentro de qualquer um dos polígonos
  for (const polygon of POLYGON_COORDINATES) {
    if (isPointInPolygon(point, polygon)) {
      return true;
    }
  }
  
  return false;
}

/**
 * Valida se um endereço com coordenadas está dentro do perímetro OUCBT
 * @param endereco - Objeto com dados do endereço incluindo latitude e longitude
 * @returns Objeto com resultado da validação e mensagem
 */
export function validateAddressInPerimeter(endereco: {
  latitude: number | null;
  longitude: number | null;
  logradouro?: string;
  bairro?: string;
  cidade?: string;
}): { isValid: boolean; message: string } {
  if (!endereco.latitude || !endereco.longitude) {
    return {
      isValid: false,
      message: "Coordenadas do endereço não encontradas. Verifique se o endereço está correto."
    };
  }

  const isWithinPerimeter = isWithinOUCBTPerimeter(endereco.latitude, endereco.longitude);

  if (!isWithinPerimeter) {
    return {
      isValid: false,
      message: "O endereço informado não está dentro do perímetro de adesão do OUCBT. Verifique se o endereço está correto ou escolha um endereço dentro da região permitida."
    };
  }

  return {
    isValid: true,
    message: "Endereço válido dentro do perímetro OUCBT."
  };
}

/**
 * Obtém as coordenadas dos limites do perímetro OUCBT
 * @returns Objeto com coordenadas mínimas e máximas
 */
export function getPerimeterBounds() {
  let minLng = Infinity, maxLng = -Infinity;
  let minLat = Infinity, maxLat = -Infinity;

  POLYGON_COORDINATES.forEach(polygon => {
    polygon.forEach(([lng, lat]) => {
      minLng = Math.min(minLng, lng);
      maxLng = Math.max(maxLng, lng);
      minLat = Math.min(minLat, lat);
      maxLat = Math.max(maxLat, lat);
    });
  });

  return {
    minLongitude: minLng,
    maxLongitude: maxLng,
    minLatitude: minLat,
    maxLatitude: maxLat,
    center: [(minLng + maxLng) / 2, (minLat + maxLat) / 2] as [number, number]
  };
}